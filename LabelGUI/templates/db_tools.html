<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DB Tools</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__title">Database Tools</div>
      <div class="brand__subtitle">Export/import labels so multiple people can work on one dataset</div>
    </div>
    <a class="btn btn--ghost" href="/">Home</a>
  </header>

  <main class="container">
    <div class="card">
      <h3>Export</h3>
      <p class="muted">Download the current SQLite database file. Share it with another labeler.</p>
      <a class="btn btn--primary" href="/db_download">Download db/droneai.sqlite</a>

      <div style="margin-top:12px;">
        <p class="muted">Optional: export tables to Excel for reporting.</p>
        <a class="btn btn--secondary" href="/db_export_excel">Export Excel (all tables)</a>
      </div>
    </div>

    <div class="card" style="margin-top:16px;">
      <h3>Import (continue other peopleâ€™s work)</h3>
      <p class="muted">
        Upload a previously labeled database. This will back up your current DB first, then replace it.
        After import, everyone should label using the imported DB to avoid splitting the dataset.
      </p>

      <form method="POST" action="/db_upload" enctype="multipart/form-data">
        <input type="file" name="db_file" accept=".sqlite,.db" required />
        <button class="btn btn--primary" type="submit">Import DB</button>
      </form>

      {% if message %}
        <p style="margin-top:10px;"><b>{{ message }}</b></p>
      {% endif %}
      {% if error %}
        <p style="margin-top:10px; color:#ef4444;"><b>{{ error }}</b></p>
      {% endif %}
    </div>

    <div class="card" style="margin-top:16px;">
      <h3>Logout</h3>
      <a class="btn btn--ghost" href="/logout">Logout</a>
    </div>
  </main>
</body>
</html>
